import{c as q,a as S,h as x,b,u as E,d as D,g as Q,_ as T,e as $,r as f,o as r,f as o,i as d,j as i,w as z,Q as h,k,F as g,l as F,m as I,n as X,p as j,t as L,q as M,s as N,v as H,x as V,y as G}from"./index.5fb1f540.js";const O=q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=S(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>x(e.tag,{class:n.value},b(t.default))}}),P=q({name:"QCard",props:{...E,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Q(),_=D(e,n),m=S(()=>"q-card"+(_.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>x(e.tag,{class:m.value},b(t.default))}});const A=e=>(H("data-v-4eef6268"),e=e(),V(),e),J={class:"main bg-grey-5"},K={class:"main__btnGoBack"},R={key:0},U={key:0},W=["innerHTML"],Y={key:1,class:"row justify-center q-my-md"},Z={key:2,class:"text-center"},ee={key:3},te=A(()=>d("h3",{class:"text-center text-warning"},"El correo que intenta ver no existe.",-1)),ae=[te],re={__name:"Email",props:{from:{type:[Number],default:0},id:{type:[String],required:!0},query:{type:[String],required:!0}},setup(e){const t=e,n=$(),_=1e4,m=["From","To","Subject","Bcc","Cc","X-From","X-To","X-Bcc","X-cc","X-Origin","Date","Content"],w=[{key:"<",value:"&lt;"},{key:">",value:"&gt;"},{key:'"',value:"&quot;"},{key:"'",value:"&apos;"},{key:"&lt;mark&gt;",value:"<mark>"},{key:"&lt;/mark&gt;",value:"</mark>"}],c=f(null),p=f(!1),u=f(!1),B=l=>{let a=c.value._source[l];a=a.replace(`${t.query}`,`<mark>${t.query}</mark>`);for(const{key:s,value:v}of w)a=a.replace(s,v);return a},C=()=>{N.push("/")},y=async()=>{if(n.getEmail){X(()=>{c.value=n.getEmail});return}try{if(u.value)return;u.value=!0;const l={from:t.from,max_results:1,query:{bool:{should:[{simple_query_string:{query:t.query}}],filter:[{term:{_id:t.id}}]}},_source:[]},a=await j.post("/zinc/ernor/search/es",l,{timeout:_}),s=a.data.hits;c.value=s.hits[0],a&&(p.value=!1)}catch(l){console.log(l),p.value=!0}finally{setTimeout(()=>{u.value=!1},100)}};return y(),(l,a)=>(r(),o("main",J,[d("div",K,[i(h,{rounded:"",color:"primary",size:"md",label:"Go Back",onClick:z(C,["stop","prevent"])},null,8,["onClick"])]),i(P,{class:"card_email"},{default:k(()=>[i(O,null,{default:k(()=>[c.value&&c.value._source?(r(),o("div",R,[(r(),o(g,null,F(m,(s,v)=>(r(),o(g,{key:`${s}-${v}`},[c.value._source[s]?(r(),o("div",U,[d("h3",null,L(s),1),d("p",{class:"q-mb-lg",style:{"white-space":"pre-wrap"},innerHTML:B(s)},null,8,W)])):M("",!0)],64))),64))])):u.value?(r(),o("div",Y,[i(I,{color:"primary",size:"40px"})])):p.value?(r(),o("div",Z,[i(h,{onClick:y,color:"red","icon-right":"send",label:"Error al cargar el correo, intente nuevamente"})])):(r(),o("div",ee,ae))]),_:1})]),_:1})]))}},se=T(re,[["__scopeId","data-v-4eef6268"]]),ne={__name:"ShowEmail",setup(e){return(t,n)=>(r(),G(se))}};export{ne as default};
